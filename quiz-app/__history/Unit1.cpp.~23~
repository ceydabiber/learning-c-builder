//---------------------------------------------------------------------------

#include <fmx.h>
#include <queue>
#pragma hdrstop

#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.fmx"

class Question{
   public:

   char* Text;
   char* Answer1;
   char* Answer2;
   char* Answer3;

   int CorrectAnswer;
   int points;

   Question(){}
   Question(char* text, char* ans1, char* ans2, char* ans3, int correctAns, int point){
		Text=text;
		Answer1=ans1;
		Answer2=ans2;
		Answer3=ans3;
		CorrectAnswer=correctAns;
		points = point;

   }

};

std::queue<Question> LoadQuestions(){

	Question q1= Question(" Avustralya'nýn baþkenti neresidir?","Sydney","Melbourne","Canberra", 3, 2);
	Question q2= Question(" Kýzýl Gezegen olarak bilinen gezegen hangisidir?","Merkür","Mars","Jüpiter", 2, 1);
	Question q3= Question(" Kanada'nýn baþkenti neresidir?","Ottawa","Toronto","Vancouver", 1, 2);

	std::queue<Question> questions;
	questions.push(q1);
	questions.push(q2);
	questions.push(q3);

	return questions;
	}

std::queue<Question> questions;
Question currentQuestion;
int selectedAnswer;
int score= 0;

TForm1 *Form1;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
	: TForm(Owner)
{
	 questions= LoadQuestions();
	 currentQuestion= questions.front();

	 QuestionLabel->Text= currentQuestion.Text;
	 Answer1RadioButton->Text= currentQuestion.Answer1;
	 Answer2RadioButton->Text= currentQuestion.Answer2;
	 Answer3RadioButton->Text= currentQuestion.Answer3;
	 PointsLabel->Text=score;

	 questions.pop();
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Answer1RadioButtonChange(TObject *Sender)
{
	selectedAnswer= 1;
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Answer2RadioButtonChange(TObject *Sender)
{
	selectedAnswer= 2;
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Answer3RadioButtonChange(TObject *Sender)
{
    selectedAnswer= 3;
}
//---------------------------------------------------------------------------

void __fastcall TForm1::ConfirmButtonClick(TObject *Sender)
{
	if(selectedAnswer==currentQuestion.CorrectAnswer){
	   score += currentQuestion.points;
	   PointsLabel->Text=score;
	   AnswerStatus->Text= "Doðru Cevap!";

	}
	else{
	   AnswerStatus->Text= "Yanlýþ Cevap!";
	}


	FeedbackTimer->Enabled= true;


}
//---------------------------------------------------------------------------

void __fastcall TForm1::ResetButtonClick(TObject *Sender)
{
	 questions= LoadQuestions();

     currentQuestion= questions.front();

	 QuestionLabel->Text= currentQuestion.Text;
	 Answer1RadioButton->Text= currentQuestion.Answer1;
	 Answer2RadioButton->Text= currentQuestion.Answer2;
	 Answer3RadioButton->Text= currentQuestion.Answer3;

	 questions.pop();

	 Answer1RadioButton->IsChecked= false;
	 Answer2RadioButton->IsChecked= false;
	 Answer3RadioButton->IsChecked= false;

	 score = 0;
	 PointsLabel->Text=score;

	 ConfirmButton->Enabled=true;
	 ConfirmButton->Text="Confirm";

}
//---------------------------------------------------------------------------

void __fastcall TForm1::FeedbackTimerTimer(TObject *Sender)
{
	 FeedbackTimer->Enabled= false;
	 AnswerStatus->Text="";

     if(!questions.empty()){
	   currentQuestion= questions.front();

	   QuestionLabel->Text= currentQuestion.Text;
	   Answer1RadioButton->Text= currentQuestion.Answer1;
	   Answer2RadioButton->Text= currentQuestion.Answer2;
	   Answer3RadioButton->Text= currentQuestion.Answer3;

	   questions.pop();

	   Answer1RadioButton->IsChecked= false;
	   Answer2RadioButton->IsChecked= false;
	   Answer3RadioButton->IsChecked= false;

	}
	else{
	   ConfirmButton->Enabled=false;
	   ConfirmButton->Text="GAME OVER";
	}


}
//---------------------------------------------------------------------------

